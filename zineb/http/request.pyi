from typing import (Generator, Generic, List, Optional, OrderedDict, TypeVar,
                    Union)
from urllib.parse import ParseResult

from requests.models import Response
from zineb.http.responses import HTMLResponse
from zineb.tags import ImageTag, Link

T = TypeVar('T', covariant=True)

class BaseRequest(Generic[T]):
    can_be_sent: bool = ...
    http_methods: List = ...
    only_secured_requests: bool = ...
    only_domains: list = ...
    only_secured_requests: bool = ...
    url: ParseResult = ...
    def __init__(self, url: Union[str, Link, ImageTag], method: Optional[str]='GET', **kwargs): ...
    def __repr__(self) -> str: ...
    @classmethod
    def follow(cls, url: str) -> Response: ...
    @classmethod
    def follow_all(cls, urls: Union[List[str, Link]]) -> Generator: ...
    def _send(self) -> Response: ...


class HTTPRequest(BaseRequest):
    counter: int = ...
    html_response: HTMLResponse = ...
    _http_response: Response = ...
    options: OrderedDict = ...
    referer: str = ...
    def __init__(self, url: str, is_download_url: bool=False, **kwargs) -> None: ...
    def urljoin(self, path: str, use_domain: bool=False) -> str: ...


class FormRequest(BaseRequest):
    fields: list = ...
    def __init__(self, url: Union[Link, str], data: dict, method: str = 'POST', **attrs) -> None: ...
